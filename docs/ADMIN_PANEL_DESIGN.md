# Lago 平台管理后台设计文档

> **重要**: 本文档描述平台管理后台的完整功能设计、页面结构、权限管理和操作流程。

## 📋 文档概述

### 目标用户
- **平台管理员**: 拥有所有权限，负责平台整体运营
- **审核专员**: 负责入驻审核、商品审核、内容审核
- **客服专员**: 处理用户投诉、逆向维权、纠纷处理
- **运营专员**: 查看数据看板、运营分析、活动管理
- **财务专员**: 处理提现申请、抽佣配置、财务结算

### 技术架构
- **前端**: Next.js 14 (App Router) + TypeScript + Tailwind CSS
- **后端**: Express.js API
- **权限**: 基于角色的访问控制 (RBAC)
- **数据可视化**: Chart.js / Recharts

---

## 🏗️ 系统架构

### 页面结构

```
平台管理后台 (PC Web)
├── 登录/认证
├── 仪表盘 (Dashboard)
├── 入驻审核
│   ├── 小区入驻审核
│   ├── 物业入驻审核
│   ├── 商家入驻审核
│   └── 审核历史记录
├── 用户管理
│   ├── 用户列表
│   ├── 商家管理
│   ├── 物业管理
│   ├── 信用体系管理
│   └── 黑名单管理
├── 商品管理
│   ├── 商品审核
│   ├── 商品列表
│   ├── 违规商品处理
│   └── 商品分类管理
├── 订单管理
│   ├── 订单列表
│   ├── 订单详情
│   ├── 退款管理
│   └── 押金管理
├── 内容审核
│   ├── 聊天内容审核
│   ├── 评论审核
│   └── 举报处理
├── 数据看板
│   ├── 核心指标
│   ├── 用户分析
│   ├── 交易分析
│   ├── 小区运营分析
│   └── AI 效果分析
├── 逆向维权
│   ├── 投诉处理
│   ├── 纠纷仲裁
│   ├── 退款审核
│   └── 维权记录
├── 财务结算
│   ├── 提现申请
│   ├── 抽佣配置
│   ├── 合作账单
│   └── 财务报表
├── 系统设置
│   ├── AI 客服配置
│   ├── 权限角色管理
│   ├── 模块开关
│   └── 系统参数配置
└── 日志审计
    ├── 操作日志
    ├── 登录日志
    └── 异常日志
```

---

## 📄 功能模块详细设计

### 1. 登录/认证

**路径**: `/admin/login`

**功能**:
- 管理员账号登录（用户名/邮箱 + 密码）
- 二次验证（可选：短信验证码）
- 记住登录状态（7天）
- 登录失败次数限制（5次锁定30分钟）

**权限验证**:
- 所有后台页面需要登录验证
- JWT Token 管理
- 角色权限校验

**页面元素**:
- Logo 和平台名称
- 登录表单（用户名、密码、验证码）
- "忘记密码"链接
- 登录按钮

---

### 2. 仪表盘 (Dashboard)

**路径**: `/admin/dashboard`

**功能模块**:

#### 2.1 核心指标卡片
- **全站 GMV**: 今日/本周/本月/累计 GMV
- **用户增长**: 新增用户数、活跃用户数（DAU/MAU）
- **活跃小区**: 活跃小区数、新增小区数
- **订单统计**: 今日订单数、待处理订单数
- **待审核事项**: 待审核商品数、待审核入驻数、待处理投诉数

#### 2.2 数据趋势图
- **GMV 趋势图**: 最近7天/30天/90天 GMV 趋势
- **用户增长趋势**: 新增用户、活跃用户趋势
- **订单量趋势**: 订单量、订单金额趋势
- **小区活跃度**: 各小区活跃度对比

#### 2.3 待处理事项
- **待审核商品**: 列表 + 快速审核入口
- **待审核入驻**: 小区/物业/商家入驻申请
- **待处理投诉**: 用户投诉和纠纷
- **异常订单**: 异常订单提醒

#### 2.4 快捷操作
- 审核商品
- 审核入驻
- 处理投诉
- 查看报表

**API 调用**:
- `GET /api/admin/dashboard/stats` - 获取核心指标
- `GET /api/admin/dashboard/trends` - 获取趋势数据
- `GET /api/admin/dashboard/pending` - 获取待处理事项

---

### 3. 入驻审核

#### 3.1 小区入驻审核

**路径**: `/admin/approval/communities`

**功能**:
- **审核列表**: 
  - 待审核小区列表
  - 筛选：待审核/已通过/已拒绝/全部
  - 搜索：小区名称、地址
- **审核详情**:
  - 小区基本信息（名称、地址、地理位置）
  - 物业合作信息（物业公司、联系人、联系方式）
  - 申请材料（营业执照、合同文件等）
  - 地理位置验证（地图显示）
- **审核操作**:
  - 通过：设置审核状态、激活小区
  - 拒绝：填写拒绝原因
  - 退回：要求补充材料
  - 备注：添加审核备注

**审核流程**:
```
提交申请 → 待审核 → 审核中 → 通过/拒绝
                      ↓
                   补充材料 → 重新审核
```

**数据字段**:
- 小区ID、名称、地址、geoHash
- 物业公司信息、联系人、电话
- 申请时间、审核人、审核时间、审核状态
- 审核备注、拒绝原因

#### 3.2 物业入驻审核

**路径**: `/admin/approval/properties`

**功能**:
- **审核列表**: 物业公司入驻申请
- **审核详情**:
  - 物业公司信息（名称、营业执照号）
  - 法人信息、联系方式
  - 合作意向（循环柜、直播活动等）
  - 资质文件（营业执照、资质证书）
- **审核操作**: 同小区入驻审核

#### 3.3 商家入驻审核

**路径**: `/admin/approval/merchants`

**功能**:
- **审核列表**: 商家入驻申请
- **审核详情**:
  - 商家基本信息（店铺名称、类型）
  - 法人信息、营业执照
  - 商品类目（玩具/游戏机）
  - 经营资质、商品样品
- **审核操作**: 同小区入驻审核

#### 3.4 审核历史记录

**路径**: `/admin/approval/history`

**功能**:
- 所有审核记录（小区/物业/商家）
- 筛选：审核类型、审核状态、审核人、时间范围
- 导出：Excel 报表
- 审核统计：通过率、拒绝率、平均审核时长

**API 调用**:
- `GET /api/admin/approval/communities` - 获取小区审核列表
- `GET /api/admin/approval/communities/:id` - 获取审核详情
- `POST /api/admin/approval/communities/:id/approve` - 通过审核
- `POST /api/admin/approval/communities/:id/reject` - 拒绝审核
- `POST /api/admin/approval/communities/:id/return` - 退回申请

---

### 4. 用户管理

#### 4.1 用户列表

**路径**: `/admin/users`

**功能**:
- **用户列表**:
  - 表格展示：用户ID、昵称、角色、手机号、注册时间、信用积分、状态
  - 筛选：角色（用户/商家/物业）、状态（正常/冻结/黑名单）、注册时间
  - 搜索：用户ID、昵称、手机号
  - 排序：注册时间、信用积分、活跃度
- **用户详情**:
  - 基本信息（昵称、头像、手机号、邮箱、角色）
  - 信用信息（信用积分、信用等级、信用历史）
  - 关联信息（加入的小区、发布的商品、订单记录）
  - 操作历史（违规记录、投诉记录）
- **用户操作**:
  - 查看详情
  - 冻结/解冻账号
  - 调整信用积分
  - 加入黑名单/移出黑名单
  - 重置密码
  - 发送站内消息

#### 4.2 商家管理

**路径**: `/admin/users/merchants`

**功能**:
- 商家列表（同用户列表，但筛选角色为商家）
- 商家详情：
  - 店铺信息、营业执照
  - 商品统计（发布数、在售数、已售数）
  - 订单统计（总订单数、GMV、好评率）
  - 违规记录、投诉记录
- 商家操作：
  - 查看商品列表
  - 查看订单记录
  - 调整商家等级/权限
  - 冻结商家账号

#### 4.3 物业管理

**路径**: `/admin/users/properties`

**功能**:
- 物业列表（同用户列表，但筛选角色为物业）
- 物业详情：
  - 物业公司信息
  - 合作小区列表
  - 循环柜管理情况
  - 活动组织记录
  - 合作收益统计
- 物业操作：
  - 查看合作小区
  - 查看活动记录
  - 调整合作分成比例

#### 4.4 信用体系管理

**路径**: `/admin/users/credit`

**功能**:
- **信用积分规则配置**:
  - 积分获取规则（完成交易、好评、举报违规等）
  - 积分扣除规则（违规、投诉、差评等）
  - 信用等级划分（普通/良好/优秀/黑名单）
- **信用调整**:
  - 手动调整用户信用积分
  - 调整原因记录
  - 调整历史查询
- **信用统计**:
  - 各信用等级用户分布
  - 信用积分趋势
  - 信用违规统计

#### 4.5 黑名单管理

**路径**: `/admin/users/blacklist`

**功能**:
- 黑名单列表（用户ID、昵称、加入原因、加入时间、操作人）
- 加入黑名单：
  - 选择用户
  - 填写原因（欺诈、违规、恶意投诉等）
  - 设置限制（禁止发布商品、禁止交易等）
- 移出黑名单：
  - 审核申请
  - 记录移出原因
- 黑名单统计：
  - 黑名单数量、新增趋势
  - 加入原因分布

**API 调用**:
- `GET /api/admin/users` - 获取用户列表
- `GET /api/admin/users/:id` - 获取用户详情
- `PUT /api/admin/users/:id/status` - 更新用户状态
- `PUT /api/admin/users/:id/credit` - 调整信用积分
- `POST /api/admin/users/:id/blacklist` - 加入黑名单
- `DELETE /api/admin/users/:id/blacklist` - 移出黑名单

---

### 5. 商品管理

#### 5.1 商品审核

**路径**: `/admin/products/approval`

**功能**:
- **待审核商品列表**:
  - 商品信息（标题、图片、价格、分类、卖家）
  - 审核状态（待审核、审核中、已通过、已拒绝）
  - 筛选：分类、状态、提交时间
  - 搜索：商品标题、卖家昵称
- **审核详情**:
  - 商品完整信息（图片、描述、价格、押金等）
  - 卖家信息（昵称、信用积分、认证状态）
  - AI 审核结果（违规检测、敏感词检测）
  - 相似商品对比（防止重复发布）
- **审核操作**:
  - 通过：商品上架，通知卖家
  - 拒绝：选择拒绝原因（违规内容、虚假信息、重复商品等），通知卖家
  - 退回：要求修改后重新提交
  - 标记：标记为优质商品/问题商品
- **批量操作**:
  - 批量通过
  - 批量拒绝
  - 批量标记

**审核规则**:
- AI 自动审核（图片识别、文本检测）
- 人工复审（AI 标记为可疑的商品）
- 审核时效：24小时内完成审核

#### 5.2 商品列表

**路径**: `/admin/products`

**功能**:
- **商品列表**:
  - 所有商品（包括已审核和未审核）
  - 筛选：状态、分类、小区、发布时间
  - 搜索：商品标题、卖家昵称、商品ID
- **商品详情**:
  - 完整商品信息
  - 浏览数据（浏览次数、收藏次数）
  - 交易数据（订单数、成交金额）
  - 审核记录
  - 违规记录
- **商品操作**:
  - 上架/下架商品
  - 编辑商品信息
  - 删除商品
  - 标记违规
  - 查看订单记录

#### 5.3 违规商品处理

**路径**: `/admin/products/violations`

**功能**:
- **违规商品列表**:
  - 被举报的商品
  - AI 检测违规的商品
  - 人工标记违规的商品
- **违规处理**:
  - 查看违规详情（违规类型、违规内容、举报人）
  - 处理操作：
    - 下架商品
    - 删除商品
    - 警告卖家
    - 扣除信用积分
    - 加入黑名单（严重违规）
  - 处理结果通知卖家

#### 5.4 商品分类管理

**路径**: `/admin/products/categories`

**功能**:
- 商品分类列表（玩具、游戏机等）
- 分类管理：
  - 添加分类
  - 编辑分类（名称、图标、排序）
  - 删除分类
  - 设置分类状态（启用/禁用）
- 分类统计：
  - 各分类商品数量
  - 各分类交易量

**API 调用**:
- `GET /api/admin/products/pending` - 获取待审核商品
- `GET /api/admin/products/:id` - 获取商品详情
- `POST /api/admin/products/:id/approve` - 通过审核
- `POST /api/admin/products/:id/reject` - 拒绝审核
- `PUT /api/admin/products/:id/status` - 更新商品状态
- `POST /api/admin/products/:id/violation` - 标记违规

---

### 6. 订单管理

#### 6.1 订单列表

**路径**: `/admin/orders`

**功能**:
- **订单列表**:
  - 订单信息（订单号、商品、买家、卖家、金额、状态、时间）
  - 筛选：订单状态、支付状态、订单类型（租赁/购买）、时间范围
  - 搜索：订单号、商品标题、买家/卖家昵称
- **订单详情**:
  - 完整订单信息
  - 商品信息
  - 买家/卖家信息
  - 交易记录（支付、退款）
  - 聊天记录（如有纠纷）
- **订单操作**:
  - 查看详情
  - 取消订单
  - 处理退款
  - 处理纠纷

#### 6.2 退款管理

**路径**: `/admin/orders/refunds`

**功能**:
- **退款申请列表**:
  - 退款订单信息（订单号、商品、金额、申请原因）
  - 退款状态（待审核、审核中、已通过、已拒绝）
  - 筛选：退款状态、退款类型、时间范围
- **退款审核**:
  - 查看退款详情（订单信息、退款原因、退款凭证）
  - 审核操作：
    - 通过退款：退款到原支付账户
    - 拒绝退款：填写拒绝原因
    - 部分退款：设置退款金额
  - 退款记录（退款时间、退款金额、退款方式）

#### 6.3 押金管理

**路径**: `/admin/orders/deposits`

**功能**:
- **押金列表**:
  - 押金信息（订单号、商品、押金金额、状态）
  - 押金状态（待退还、已退还、已没收）
- **押金操作**:
  - 退还押金（订单完成、商品归还）
  - 没收押金（商品损坏、逾期不还）
  - 押金记录查询

**API 调用**:
- `GET /api/admin/orders` - 获取订单列表
- `GET /api/admin/orders/:id` - 获取订单详情
- `GET /api/admin/orders/refunds` - 获取退款列表
- `POST /api/admin/orders/:id/refund/approve` - 通过退款
- `POST /api/admin/orders/:id/refund/reject` - 拒绝退款

---

### 7. 内容审核

#### 7.1 聊天内容审核

**路径**: `/admin/content/chat`

**功能**:
- **违规聊天记录**:
  - AI 检测的违规聊天内容
  - 用户举报的聊天内容
  - 筛选：违规类型、处理状态、时间范围
- **审核处理**:
  - 查看完整聊天记录
  - 处理操作：
    - 删除违规消息
    - 警告用户
    - 冻结账号（严重违规）
    - 标记为误报

#### 7.2 评论审核

**路径**: `/admin/content/comments`

**功能**:
- **评论列表**:
  - 商品评论、订单评价
  - 筛选：审核状态、违规类型
- **审核操作**:
  - 通过/拒绝评论
  - 删除违规评论
  - 标记恶意评价

#### 7.3 举报处理

**路径**: `/admin/content/reports`

**功能**:
- **举报列表**:
  - 举报类型（商品、用户、聊天、评论）
  - 举报内容、举报人、被举报对象
  - 举报状态（待处理、处理中、已处理）
- **处理流程**:
  - 查看举报详情
  - 核实举报内容
  - 处理被举报对象（下架商品、冻结账号等）
  - 反馈处理结果给举报人

**API 调用**:
- `GET /api/admin/content/chat/violations` - 获取违规聊天
- `GET /api/admin/content/comments` - 获取评论列表
- `GET /api/admin/content/reports` - 获取举报列表
- `POST /api/admin/content/reports/:id/handle` - 处理举报

---

### 8. 数据看板

#### 8.1 核心指标

**路径**: `/admin/analytics/overview`

**功能**:
- **实时指标卡片**:
  - 今日 GMV、今日订单数、今日新增用户
  - 活跃小区数、在线用户数
- **趋势图表**:
  - GMV 趋势（日/周/月）
  - 用户增长趋势
  - 订单量趋势
  - 对比分析（同比、环比）

#### 8.2 用户分析

**路径**: `/admin/analytics/users`

**功能**:
- **用户统计**:
  - 用户总数、新增用户、活跃用户（DAU/MAU）
  - 用户留存率（次日/7日/30日）
  - 用户分布（按小区、按角色）
- **用户行为**:
  - 用户活跃度分析
  - 功能使用情况（浏览、发布、交易）
  - 用户流失分析
- **用户画像**:
  - 年龄分布、性别分布
  - 消费能力分析
  - 偏好类目分析

#### 8.3 交易分析

**路径**: `/admin/analytics/transactions`

**功能**:
- **交易统计**:
  - 总 GMV、订单数、平均客单价
  - 交易类型分布（租赁/购买）
  - 类目分布（玩具/游戏机）
- **交易趋势**:
  - GMV 趋势、订单量趋势
  - 各小区交易对比
  - 各商家交易排名
- **交易转化**:
  - 浏览-下单转化率
  - 聊天-交易转化率
  - 各环节转化漏斗

#### 8.4 小区运营分析

**路径**: `/admin/analytics/communities`

**功能**:
- **小区数据**:
  - 各小区 GMV、订单数、用户数
  - 小区活跃度排名
  - 小区增长趋势
- **小区对比**:
  - 横向对比各小区数据
  - 识别高价值小区
  - 识别潜力小区
- **运营建议**:
  - AI 推荐的运营优化建议
  - 活动建议
  - 合作建议

#### 8.5 AI 效果分析

**路径**: `/admin/analytics/ai`

**功能**:
- **AI 功能效果**:
  - 智能推荐效果（点击率、转化率）
  - 智能搜索效果（搜索成功率、意图识别准确率）
  - 智能客服效果（解决率、满意度）
  - AI 审核效果（准确率、误报率）
- **AI 优化建议**:
  - 模型优化建议
  - 参数调整建议

**API 调用**:
- `GET /api/admin/analytics/overview` - 获取核心指标
- `GET /api/admin/analytics/users` - 获取用户分析
- `GET /api/admin/analytics/transactions` - 获取交易分析
- `GET /api/admin/analytics/communities` - 获取小区分析
- `GET /api/admin/analytics/ai` - 获取 AI 效果

---

### 9. 逆向维权

#### 9.1 投诉处理

**路径**: `/admin/disputes/complaints`

**功能**:
- **投诉列表**:
  - 投诉信息（投诉人、被投诉人、投诉类型、投诉内容）
  - 投诉状态（待处理、处理中、已处理、已关闭）
  - 筛选：投诉类型、状态、时间范围
- **投诉详情**:
  - 完整投诉内容
  - 相关订单信息
  - 聊天记录、图片凭证
  - 处理历史
- **处理操作**:
  - 处理投诉（联系双方、调查取证）
  - 处理结果（支持投诉人/被投诉人/双方和解）
  - 处理措施（退款、补偿、警告等）
  - 关闭投诉

#### 9.2 纠纷仲裁

**路径**: `/admin/disputes/arbitrations`

**功能**:
- **纠纷列表**:
  - 纠纷订单、纠纷类型、纠纷金额
  - 纠纷状态（待仲裁、仲裁中、已仲裁）
- **仲裁流程**:
  - 查看纠纷详情（订单、聊天记录、凭证）
  - 联系双方了解情况
  - 平台仲裁（根据规则和证据）
  - 仲裁结果（退款、补偿、警告等）
  - 仲裁结果通知双方

#### 9.3 退款审核

**路径**: `/admin/disputes/refunds`

**功能**:
- 退款申请列表（同订单管理中的退款管理）
- 退款审核流程：
  - 查看退款原因和凭证
  - 核实订单状态
  - 审核退款（通过/拒绝/部分退款）
  - 退款执行

#### 9.4 维权记录

**路径**: `/admin/disputes/history`

**功能**:
- 所有投诉、纠纷、退款记录
- 筛选：类型、状态、处理人、时间范围
- 统计：投诉率、纠纷率、退款率、处理时效
- 导出报表

**API 调用**:
- `GET /api/admin/disputes/complaints` - 获取投诉列表
- `GET /api/admin/disputes/complaints/:id` - 获取投诉详情
- `POST /api/admin/disputes/complaints/:id/handle` - 处理投诉
- `GET /api/admin/disputes/arbitrations` - 获取纠纷列表
- `POST /api/admin/disputes/arbitrations/:id/arbitrate` - 仲裁纠纷

---

### 10. 财务结算

#### 10.1 提现申请

**路径**: `/admin/finance/withdrawals`

**功能**:
- **提现申请列表**:
  - 申请人、提现金额、提现账户、申请时间、状态
  - 筛选：状态（待审核、审核中、已通过、已拒绝）、时间范围
- **提现审核**:
  - 查看提现详情（申请人信息、账户信息、提现金额）
  - 审核操作：
    - 通过：执行提现，记录流水
    - 拒绝：填写拒绝原因
  - 提现记录（提现时间、提现金额、手续费、实际到账）

#### 10.2 抽佣配置

**路径**: `/admin/finance/commission`

**功能**:
- **抽佣规则配置**:
  - 寄售抽佣比例（5%-15%，可配置）
  - 租赁服务费比例（10%，可配置）
  - 不同类目抽佣比例
  - 不同商家等级抽佣比例
- **抽佣记录**:
  - 每笔订单抽佣记录
  - 抽佣统计（总抽佣金额、各类型抽佣分布）

#### 10.3 合作账单

**路径**: `/admin/finance/bills`

**功能**:
- **物业合作账单**:
  - 各小区合作收益
  - 分成比例、分成金额
  - 结算周期、结算状态
- **商家合作账单**:
  - 商家服务费、广告费
  - 结算记录
- **账单管理**:
  - 生成账单
  - 审核账单
  - 执行结算

#### 10.4 财务报表

**路径**: `/admin/finance/reports`

**功能**:
- **收入报表**:
  - 总收入、各类型收入（抽佣、服务费、广告费等）
  - 收入趋势、收入分布
- **支出报表**:
  - 总支出、各类型支出（提现、分成、运营成本等）
  - 支出趋势
- **利润分析**:
  - 净利润、利润率
  - 盈亏平衡分析
- **报表导出**:
  - Excel 报表
  - PDF 报表

**API 调用**:
- `GET /api/admin/finance/withdrawals` - 获取提现列表
- `POST /api/admin/finance/withdrawals/:id/approve` - 通过提现
- `GET /api/admin/finance/commission/config` - 获取抽佣配置
- `PUT /api/admin/finance/commission/config` - 更新抽佣配置
- `GET /api/admin/finance/bills` - 获取账单列表
- `GET /api/admin/finance/reports` - 获取财务报表

---

### 11. 系统设置

#### 11.1 AI 客服配置

**路径**: `/admin/settings/ai`

**功能**:
- **AI 客服设置**:
  - 启用/禁用 AI 客服
  - AI 模型选择（通义千问等）
  - API 密钥配置
  - 客服话术配置
- **AI 推荐设置**:
  - 推荐算法参数
  - 推荐数量配置
- **AI 审核设置**:
  - 审核敏感度配置
  - 审核规则配置

#### 11.2 权限角色管理

**路径**: `/admin/settings/roles`

**功能**:
- **角色列表**:
  - 角色名称、权限列表、成员数
  - 系统角色：超级管理员、审核专员、客服专员、运营专员、财务专员
- **权限配置**:
  - 功能权限（模块访问权限）
  - 数据权限（数据查看范围）
  - 操作权限（增删改查权限）
- **用户角色分配**:
  - 为用户分配角色
  - 查看用户权限

#### 11.3 模块开关

**路径**: `/admin/settings/modules`

**功能**:
- **功能模块开关**:
  - 启用/禁用功能模块（循环柜、直播、虚拟号等）
  - 模块配置（参数设置）
- **维护模式**:
  - 开启/关闭维护模式
  - 维护公告设置

#### 11.4 系统参数配置

**路径**: `/admin/settings/system`

**功能**:
- **基础配置**:
  - 平台名称、Logo、联系方式
  - 服务条款、隐私政策
- **业务配置**:
  - 信用积分规则
  - 押金规则
  - 交易规则
- **通知配置**:
  - 通知模板
  - 通知渠道配置

**API 调用**:
- `GET /api/admin/settings/ai` - 获取 AI 配置
- `PUT /api/admin/settings/ai` - 更新 AI 配置
- `GET /api/admin/settings/roles` - 获取角色列表
- `POST /api/admin/settings/roles` - 创建角色
- `PUT /api/admin/settings/roles/:id` - 更新角色
- `GET /api/admin/settings/modules` - 获取模块配置
- `PUT /api/admin/settings/modules` - 更新模块配置

---

### 12. 日志审计

#### 12.1 操作日志

**路径**: `/admin/logs/operations`

**功能**:
- **操作日志列表**:
  - 操作人、操作类型、操作对象、操作时间、操作结果
  - 筛选：操作人、操作类型、时间范围
  - 搜索：操作对象、操作内容
- **日志详情**:
  - 完整操作记录（操作前状态、操作后状态）
  - 操作 IP、操作设备

#### 12.2 登录日志

**路径**: `/admin/logs/logins`

**功能**:
- **登录记录**:
  - 登录人、登录时间、登录 IP、登录设备、登录状态
  - 筛选：登录人、登录状态、时间范围
- **异常登录**:
  - 异地登录提醒
  - 频繁登录失败提醒

#### 12.3 异常日志

**路径**: `/admin/logs/errors`

**功能**:
- **错误日志**:
  - 错误类型、错误信息、发生时间、发生位置
  - 筛选：错误级别、时间范围
- **异常监控**:
  - 错误统计
  - 错误趋势

**API 调用**:
- `GET /api/admin/logs/operations` - 获取操作日志
- `GET /api/admin/logs/logins` - 获取登录日志
- `GET /api/admin/logs/errors` - 获取错误日志

---

## 🔐 权限管理

### 角色权限矩阵

| 功能模块 | 超级管理员 | 审核专员 | 客服专员 | 运营专员 | 财务专员 |
|---------|----------|---------|---------|---------|---------|
| 仪表盘 | ✅ | ✅ | ✅ | ✅ | ✅ |
| 入驻审核 | ✅ | ✅ | ❌ | ❌ | ❌ |
| 用户管理 | ✅ | ⚠️ | ⚠️ | ✅ | ❌ |
| 商品审核 | ✅ | ✅ | ❌ | ❌ | ❌ |
| 订单管理 | ✅ | ❌ | ✅ | ✅ | ⚠️ |
| 内容审核 | ✅ | ✅ | ❌ | ❌ | ❌ |
| 数据看板 | ✅ | ✅ | ✅ | ✅ | ✅ |
| 逆向维权 | ✅ | ❌ | ✅ | ❌ | ❌ |
| 财务结算 | ✅ | ❌ | ❌ | ❌ | ✅ |
| 系统设置 | ✅ | ❌ | ❌ | ❌ | ❌ |
| 日志审计 | ✅ | ❌ | ❌ | ❌ | ❌ |

**说明**:
- ✅ 完全权限（查看、操作）
- ⚠️ 部分权限（仅查看，或有限操作）
- ❌ 无权限

### 数据权限

- **审核专员**: 只能查看和操作审核相关数据
- **客服专员**: 可以查看用户、订单、投诉数据，但无法修改用户状态
- **运营专员**: 可以查看所有数据，但无法修改财务和系统配置
- **财务专员**: 只能查看和操作财务相关数据
- **超级管理员**: 拥有所有权限

---

## 🎨 界面设计规范

### 布局结构

```
┌─────────────────────────────────────────┐
│  Header (Logo + 导航 + 用户信息)        │
├──────────┬──────────────────────────────┤
│          │                              │
│ Sidebar  │  Main Content                │
│ (菜单)   │  (页面内容)                   │
│          │                              │
│          │                              │
└──────────┴──────────────────────────────┘
```

### 设计元素

- **主色调**: 科技信赖蓝 `#00C4CC`（用于主要操作按钮、链接）
- **强调色**: 活力橙 `#FF8C69`（用于警告、重要提示）
- **背景色**: 极浅灰 `#F8F8F8`（页面背景）
- **容器色**: 纯白 `#FFFFFF`（卡片、表格背景）
- **文本色**: `#2A2A2A`（主要文本）、`#888888`（辅助文本）

### 组件规范

- **表格**: 使用 Ant Design Table 或类似组件
- **表单**: 清晰的表单布局，必填项标记
- **按钮**: 主按钮（蓝色）、次按钮（白色边框）、危险按钮（橙色）
- **卡片**: 圆角 8px，轻微阴影
- **图标**: 统一的图标风格

---

## 📊 数据看板指标定义

### 核心指标

1. **GMV (Gross Merchandise Volume)**
   - 定义: 平台总交易额
   - 计算: 所有订单金额总和（含租赁和购买）
   - 维度: 今日/本周/本月/累计

2. **DAU (Daily Active Users)**
   - 定义: 日活跃用户数
   - 计算: 当日有登录或操作的用户数

3. **MAU (Monthly Active Users)**
   - 定义: 月活跃用户数
   - 计算: 当月有登录或操作的用户数

4. **订单转化率**
   - 定义: 浏览到下单的转化率
   - 计算: 下单用户数 / 浏览用户数

5. **聊天转交易转化率**
   - 定义: 聊天到交易的转化率
   - 计算: 交易订单数 / 发起聊天的订单数

### 运营指标

- **商品发布转化率**: 发布商品数 / 浏览发布页用户数
- **商品审核通过率**: 通过审核商品数 / 总审核商品数
- **投诉处理时效**: 平均处理投诉时长
- **退款率**: 退款订单数 / 总订单数
- **用户留存率**: 次日/7日/30日留存率

---

## 🔄 业务流程

### 入驻审核流程

```
申请提交
  ↓
AI 初步审核（可选）
  ↓
待人工审核
  ↓
审核专员审核
  ↓
通过 → 激活账号/小区
  ↓
拒绝 → 通知申请人（拒绝原因）
  ↓
退回 → 通知申请人（补充材料）
```

### 商品审核流程

```
用户发布商品
  ↓
AI 自动审核
  ↓
通过 → 直接上架
  ↓
可疑 → 待人工审核
  ↓
审核专员审核
  ↓
通过 → 商品上架
  ↓
拒绝 → 通知卖家（拒绝原因）
```

### 投诉处理流程

```
用户提交投诉
  ↓
自动分配给客服专员
  ↓
客服专员查看投诉详情
  ↓
联系双方了解情况
  ↓
平台处理（退款/补偿/警告等）
  ↓
处理结果通知双方
  ↓
关闭投诉
```

---

## 📱 响应式设计

### 桌面端（主要）

- **最小宽度**: 1280px
- **布局**: 侧边栏 + 主内容区
- **表格**: 完整显示所有列
- **图表**: 大尺寸图表

### 平板端（可选）

- **宽度**: 768px - 1279px
- **布局**: 可折叠侧边栏
- **表格**: 部分列可隐藏
- **图表**: 中等尺寸图表

---

## 🚀 开发优先级

### Phase 1: 核心功能（MVP）
1. 登录/认证
2. 仪表盘（基础数据）
3. 商品审核
4. 用户管理（基础功能）
5. 订单管理（查看）

### Phase 2: 完整功能
6. 入驻审核
7. 内容审核
8. 逆向维权
9. 数据看板（完整分析）

### Phase 3: 高级功能
10. 财务结算
11. 系统设置
12. 日志审计
13. AI 配置

---

## 📝 技术实现要点

### 前端
- 使用 Next.js 14 App Router
- 使用 Ant Design 或类似 UI 组件库
- 使用 Recharts 或 Chart.js 做数据可视化
- 使用 React Query 管理服务端状态

### 后端
- 所有接口需要管理员权限验证
- 操作记录需要写入日志表
- 敏感操作需要二次确认
- 批量操作需要异步处理

### 安全
- 所有接口需要 JWT 认证
- 敏感操作需要记录 IP 和设备信息
- 操作日志不可删除
- 定期备份数据

---

## 📚 相关文档

- [开发指南](./DEVELOPMENT_GUIDE.md) - API 开发流程
- [数据库设计](./DATABASE_DESIGN.md) - 数据库表结构
- [架构设计](./ARCHITECTURE.md) - 系统架构
- [PRD](./PRD.md) - 产品需求文档

---

**最后更新**: 2025-01-10
**文档版本**: v1.0

