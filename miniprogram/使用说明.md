# 丁家乐园 - 微信小程序使用说明

## 🎉 问题已修复！

**app.js 文件缺失问题已解决**，现在小程序可以正常运行了。

## 📁 文件结构

```
miniprogram/
├── app.js                 # 小程序入口文件 ✅
├── app.json              # 小程序配置文件 ✅
├── app.wxss              # 全局样式文件 ✅
├── sitemap.json          # 站点地图文件 ✅
├── project.config.json   # 项目配置文件 ✅
├── images/               # 图片资源目录
│   ├── share-logo.png    # 分享图片 ✅
│   └── README.md         # 图标说明
├── pages/                # 页面目录
│   └── webview/          # WebView页面（入口页面）
│       ├── webview.js    # 页面逻辑 ✅
│       ├── webview.wxml  # 页面结构 ✅
│       ├── webview.wxss  # 页面样式 ✅
│       └── webview.json  # 页面配置 ✅
└── scripts/              # 工具脚本
    ├── create-icons.html # 图标生成器
    ├── create-share-logo.html # 分享图片生成器
    └── generate-share-image.html # 基础分享图片生成器
```

## 🚀 主要功能

### WebView页面 (pages/webview) - 入口页面
- 嵌入Next.js Web应用
- 与Web应用的双向通信
- 分享功能支持
- 页面标题同步

## 🛠️ 已修复的问题

1. **✅ app.js 文件缺失** - 已创建完整的入口文件
2. **✅ app.wxss 全局样式** - 已添加全局样式文件
3. **✅ sitemap.json 缺失** - 已创建站点地图文件
4. **✅ 页面配置完善** - 已优化所有页面配置
5. **✅ 分享功能** - 已集成分享图片和功能

## 🎨 新增功能

### 1. 完整的应用生命周期管理
- 启动、显示、隐藏、错误处理
- 自动更新检查
- 全局数据管理

### 2. WebView集成
- 嵌入Next.js Web应用
- 与Web应用的双向通信
- 页面标题同步

### 3. 分享功能
- 支持分享到微信好友
- 支持分享到朋友圈
- 自定义分享图片和内容

### 4. 工具脚本
- 图标生成器
- 分享图片生成器
- 便于维护和自定义

## 🔧 使用方法

### 1. 在微信开发者工具中打开
1. 打开微信开发者工具
2. 选择"导入项目"
3. 选择 `miniprogram` 目录
4. 输入AppID（在project.config.json中已配置）

### 2. 预览和调试
1. 点击"编译"按钮
2. 在模拟器中查看效果
3. 使用真机调试功能测试

### 3. 发布上线
1. 点击"上传"按钮
2. 填写版本号和项目备注
3. 在微信公众平台提交审核

## 📱 页面说明

### WebView页面功能（入口页面）
- 加载Next.js Web应用
- 处理来自Web应用的消息
- 支持分享、导航、标题设置等功能
- 与小程序原生功能集成

## 🎯 下一步建议

1. **测试功能**：在微信开发者工具中测试所有功能
2. **自定义图标**：使用 `scripts/create-icons.html` 生成自定义图标
3. **优化分享**：使用 `scripts/create-share-logo.html` 生成更好的分享图片
4. **配置AppID**：在 `project.config.json` 中配置正确的AppID
5. **测试通信**：确保WebView与Web应用的通信正常工作

## 🐛 常见问题

### Q: 小程序无法启动？
A: 确保所有必需文件都存在，特别是 `app.js`、`app.json`、`sitemap.json`

### Q: WebView页面无法加载？
A: 检查网络连接和URL配置，确保Web应用可以正常访问

### Q: 分享功能不工作？
A: 确保 `images/share-logo.png` 文件存在且路径正确

### Q: 图标显示异常？
A: 使用 `scripts/create-icons.html` 生成正确尺寸的图标文件

现在您的小程序应该可以正常运行了！🎊
